import{_ as n,c as a,a as e,o as p}from"./app-58ZWfUWR.js";const t={};function l(o,s){return p(),a("div",null,s[0]||(s[0]=[e(`<h1 id="быстрыи-старт" tabindex="-1"><a class="header-anchor" href="#быстрыи-старт"><span>Быстрый старт</span></a></h1><p>Создание базового &quot;Hello, World&quot; Web API с использованием Волги.</p><h2 id="предварительные-требования" tabindex="-1"><a class="header-anchor" href="#предварительные-требования"><span>Предварительные требования</span></a></h2><h3 id="установка-rust" tabindex="-1"><a class="header-anchor" href="#установка-rust"><span>Установка Rust</span></a></h3><p>Если вы еще не установили Rust, рекомендуется использовать утилиту <code>rustup</code>. <a href="https://doc.rust-lang.ru/book/ch01-01-installation.html" target="_blank" rel="noopener noreferrer">Здесь</a> — официальное руководство, где вы можете узнать, как это сделать.</p><p>В настоящее время, минимальная поддерживаемая версия Rust (MSRV) для Волги - 1.80. Запуск команды <code>rustup update</code> обеспечит вам доступ к самой свежей версии Rust.</p><h3 id="создание-приложения" tabindex="-1"><a class="header-anchor" href="#создание-приложения"><span>Создание приложения</span></a></h3><p>Создайте новое исполняемое (binary) приложение:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">cargo</span> new hello-world</span>
<span class="line"><span class="token builtin class-name">cd</span> hello-world</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Добавьте в <code>Cargo.toml</code> следующие зависимости:</p><div class="language-toml line-numbers-mode" data-highlighter="prismjs" data-ext="toml"><pre><code class="language-toml"><span class="line"><span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token key property">volga</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.6.3&quot;</span></span>
<span class="line"><span class="token key property">tokio</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">verion</span> <span class="token punctuation">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token key property">features</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;full&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="настроика" tabindex="-1"><a class="header-anchor" href="#настроика"><span>Настройка</span></a></h2><p>Создайте стартовую точку приложения в файле <code>main.rs</code>:</p><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code class="language-rust"><span class="line"><span class="token keyword">use</span> <span class="token namespace">volga<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">App</span><span class="token punctuation">,</span> ok<span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token attribute attr-name">#[tokio::main]</span></span>
<span class="line"><span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token namespace">std<span class="token punctuation">::</span>io<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Создаем сервер</span></span>
<span class="line">    <span class="token keyword">let</span> <span class="token keyword">mut</span> app <span class="token operator">=</span> <span class="token class-name">App</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Пример обработчика простого GET-запроса</span></span>
<span class="line">    app<span class="token punctuation">.</span><span class="token function">map_get</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">,</span> <span class="token closure-params"><span class="token closure-punctuation punctuation">|</span><span class="token closure-punctuation punctuation">|</span></span> <span class="token keyword">async</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token macro property">ok!</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// Запускаем сервер</span></span>
<span class="line">    app<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="подробное-руководство" tabindex="-1"><a class="header-anchor" href="#подробное-руководство"><span>Подробное руководство</span></a></h2><p>Структура <a href="https://docs.rs/volga/latest/volga/app/struct.App.html" target="_blank" rel="noopener noreferrer"><code>App</code></a>, представляет ваше API и по-умолчанию привязывается к адресу <code>http://localhost:7878</code>:</p><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code class="language-rust"><span class="line"><span class="token keyword">let</span> <span class="token keyword">mut</span> app <span class="token operator">=</span> <span class="token class-name">App</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Если требуется привязать сервер к другому сокету, то, можно использовать метод <a href="https://docs.rs/volga/latest/volga/app/struct.App.html#method.bind" target="_blank" rel="noopener noreferrer"><code>bind()</code></a>, например:</p><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code class="language-rust"><span class="line"><span class="token comment">// Привязка сервера к http://localhost:5000</span></span>
<span class="line"><span class="token keyword">let</span> <span class="token keyword">mut</span> app <span class="token operator">=</span> <span class="token class-name">App</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">&quot;localhost:5000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Далее, обработчик запроса <code>GET /hello</code> привязывается к маршруту:</p><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code class="language-rust"><span class="line">app<span class="token punctuation">.</span><span class="token function">map_get</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">,</span> <span class="token closure-params"><span class="token closure-punctuation punctuation">|</span><span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">ok!</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Убедитесь, что все маршруты привязаны перед запуском сервера:</p><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code class="language-rust"><span class="line">app<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="тестирование-api" tabindex="-1"><a class="header-anchor" href="#тестирование-api"><span>Тестирование API</span></a></h2><p>Вы можете протестировать своё API при помощи команды <code>curl</code>:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token operator">&gt;</span> <span class="token function">curl</span> <span class="token parameter variable">-v</span> <span class="token string">&quot;http://localhost:7878/hello&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Ожидаемый ответ:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">* Host localhost:7878 was resolved.</span>
<span class="line">* IPv6: ::1</span>
<span class="line">* IPv4: <span class="token number">127.0</span>.0.1</span>
<span class="line">*   Trying <span class="token punctuation">[</span>::1<span class="token punctuation">]</span>:7878<span class="token punctuation">..</span>.</span>
<span class="line">* Connected to localhost <span class="token punctuation">(</span>::1<span class="token punctuation">)</span> port <span class="token number">7878</span></span>
<span class="line"><span class="token operator">&gt;</span> GET /hello HTTP/1.1</span>
<span class="line"><span class="token operator">&gt;</span> Host: localhost:7878</span>
<span class="line"><span class="token operator">&gt;</span> User-Agent: curl/8.9.1</span>
<span class="line"><span class="token operator">&gt;</span> Accept: */*</span>
<span class="line"><span class="token operator">&gt;</span></span>
<span class="line">* Request completely sent off</span>
<span class="line"><span class="token operator">&lt;</span> HTTP/1.1 <span class="token number">200</span> OK</span>
<span class="line"><span class="token operator">&lt;</span> date: Sun, <span class="token number">6</span> Oct <span class="token number">2024</span> 08:22:17 +0000</span>
<span class="line"><span class="token operator">&lt;</span> server: Volga</span>
<span class="line"><span class="token operator">&lt;</span> content-length: <span class="token number">12</span></span>
<span class="line"><span class="token operator">&lt;</span> content-type: text/plain</span>
<span class="line"><span class="token operator">&lt;</span></span>
<span class="line">* Connection <span class="token comment">#0 to host localhost left intact</span></span>
<span class="line">Hello World<span class="token operator">!</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="пример-блокирующего-старта" tabindex="-1"><a class="header-anchor" href="#пример-блокирующего-старта"><span>Пример блокирующего старта</span></a></h3><p>Волга также поддерживает создание Web API без явной зависимости от <code>tokio</code>, используя метод <a href="https://docs.rs/volga/latest/volga/app/struct.App.html#method.run_blocking" target="_blank" rel="noopener noreferrer"><code>run_blocking()</code></a>.</p><p>Это позволяет упростить зависимости <code>Cargo.toml</code>:</p><div class="language-toml line-numbers-mode" data-highlighter="prismjs" data-ext="toml"><pre><code class="language-toml"><span class="line"><span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token key property">volga</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.6.3&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Тогда <code>main.rs</code> может выглядеть так:</p><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code class="language-rust"><span class="line"><span class="token keyword">use</span> <span class="token namespace">volga<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">App</span><span class="token punctuation">,</span> ok<span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Создаем сервер</span></span>
<span class="line">    <span class="token keyword">let</span> <span class="token keyword">mut</span> app <span class="token operator">=</span> <span class="token class-name">App</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Пример обработчика простого GET-запроса</span></span>
<span class="line">    app<span class="token punctuation">.</span><span class="token function">map_get</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">,</span> <span class="token closure-params"><span class="token closure-punctuation punctuation">|</span><span class="token closure-punctuation punctuation">|</span></span> <span class="token keyword">async</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token macro property">ok!</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, World!&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Запускаем сервер</span></span>
<span class="line">    app<span class="token punctuation">.</span><span class="token function">run_blocking</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Хотя функция <code>main</code> выглядит синхронной, сервер по-прежнему работает асинхронно, используя среду выполнения <code>tokio</code>.</p><div class="hint-container info"><p class="hint-container-title">Инфо</p><p>Подход с <a href="https://docs.rs/volga/latest/volga/app/struct.App.html#method.run_blocking" target="_blank" rel="noopener noreferrer"><code>run_blocking()</code></a> подходит для быстрого создания прототипов, простых инструментов или учебных сценариев, где вы хотите избежать работы с настройкой асинхронного рантайма. Однако использование <code>#[tokio::main]</code> рекомендуемый подход для <strong>продакшена</strong>, поскольку он обеспечивает полный контроль над асинхронной средой выполнения, допускает более расширенную настройку и лучше поддерживает интеграцию с другими асинхронными библиотеками и сервисами.</p></div><p>Полный пример можно найти <a href="https://github.com/RomanEmreis/volga/blob/main/examples/hello_world/src/main.rs" target="_blank" rel="noopener noreferrer">здесь</a>.</p>`,37)]))}const i=n(t,[["render",l]]),r=JSON.parse('{"path":"/ru/basics/quick-start.html","title":"Быстрый старт","lang":"ru-RU","frontmatter":{},"git":{"updatedTime":1754483812000,"contributors":[{"name":"Roman Emreis","username":"","email":"Roman_Emreis@epam.com","commits":12},{"name":"RomanEmreis","username":"RomanEmreis","email":"39233213+RomanEmreis@users.noreply.github.com","commits":5,"url":"https://github.com/RomanEmreis"}],"changelog":[{"hash":"b171c253d6071cf479d4fc26ab4d9034eab14952","time":1754483812000,"email":"Roman_Emreis@epam.com","author":"Roman Emreis","message":"new release"},{"hash":"e834cb9ecab2c5eaae50b2a1b42ef1e5cb437dc0","time":1753605981000,"email":"r.emreis@outlook.com","author":"Roman Emreis","message":"small updates"},{"hash":"446f2cb336c3db45ba44b4f07f646b570e054215","time":1753605804000,"email":"r.emreis@outlook.com","author":"Roman Emreis","message":"new release"},{"hash":"c8872282682c0253111255ea1f5546f8b6d372a5","time":1752418092000,"email":"r.emreis@outlook.com","author":"Roman Emreis","message":"new release"},{"hash":"eb199fedf1f7ed09919d9d8c68ce4668da246571","time":1747325626000,"email":"Roman_Emreis@epam.com","author":"Roman Emreis","message":"new release"},{"hash":"be45b5b78d0d2925cbe8628c96fe06acf0d952b4","time":1744624313000,"email":"Roman_Emreis@epam.com","author":"Roman Emreis","message":"new release"},{"hash":"a867fa2aa5f2803668e59034c5e3f7dfbf34caca","time":1742551187000,"email":"Roman_Emreis@epam.com","author":"Roman Emreis","message":"new release"},{"hash":"719b6efa42303ef55a2a74dafe505a03fc71ac3e","time":1740081883000,"email":"39233213+RomanEmreis@users.noreply.github.com","author":"Roman","message":"new release"},{"hash":"7c086be3a38ed023582e6ce85f7b7ee41fb1f649","time":1739560954000,"email":"39233213+RomanEmreis@users.noreply.github.com","author":"Roman","message":"new release"},{"hash":"d7d673fca21757efa0a4659c63884168bfe315fe","time":1738859397000,"email":"Roman_Emreis@epam.com","author":"Roman Emreis","message":"new release"},{"hash":"590c63e2d69004cdcaebbdeb6f7cabd584692c1e","time":1738600433000,"email":"Roman_Emreis@epam.com","author":"Roman Emreis","message":"new release"},{"hash":"22335fb3609085607d6b4dfd02db24fa61db08e5","time":1737643784000,"email":"Roman_Emreis@epam.com","author":"Roman Emreis","message":"some updates"},{"hash":"5d6cdc2c818f56d2f0f360e08643446a9e8c2e1f","time":1736868027000,"email":"Roman_Emreis@epam.com","author":"Roman Emreis","message":"new release"},{"hash":"3f7ce55bfa3f16cc7c4f018be7048c970db9f6f7","time":1736011023000,"email":"39233213+RomanEmreis@users.noreply.github.com","author":"Roman","message":"Update quick-start.md"},{"hash":"bc4ca293a98ca34d762bcb8c704d9a2d39de7f6f","time":1736010972000,"email":"39233213+RomanEmreis@users.noreply.github.com","author":"Roman","message":"Update quick-start.md"},{"hash":"7155b2644b9f96b9ba3d2347103e28c257137ad8","time":1736010713000,"email":"39233213+RomanEmreis@users.noreply.github.com","author":"Roman","message":"Update quick-start.md"},{"hash":"6246a39616ca458e3024eb70c407b4da2234fd60","time":1735471106000,"email":"Roman_Emreis@epam.com","author":"Roman Emreis","message":"ru localization"}]},"filePathRelative":"ru/basics/quick-start.md"}');export{i as comp,r as data};
